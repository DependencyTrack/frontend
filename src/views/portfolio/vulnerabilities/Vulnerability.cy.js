import Vulnerability from './Vulnerability.vue';
import { genAxiosResponse } from '../../../../cypress/support/utils';

describe('Vulnerability', () => {
  it('mounts successfully', () => {
    cy.setToken(['VIEW_PORTFOLIO']);

    cy.mount(Vulnerability, {
      prototypeMocks: {
        axios: {
          get: genAxiosResponse({
            '/api/v1/vulnerability/uuid': {
              source: 'NVD',
              vulnId: 'vulnId',
            },
          }),
        },
        $toastr: {
          e: cy.stub(),
        },
        $router: {
          replace: cy.stub(),
          push: cy.stub(),
        },
        $route: {
          params: {
            uuid: 'uuid',
          },
          fullPath: '/vulnerabilities/NVD/vulnId/',
        },
      },
    });

    cy.get('div.animated.fadeIn').should('be.visible');
  });
});
